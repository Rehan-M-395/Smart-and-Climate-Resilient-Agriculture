<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Weather Forecast</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body { font-family: Arial; background: #1e1e1e; color: #fff; padding: 20px; }
    .section { margin-bottom: 40px; }
    canvas { background: #2b2b2b; padding: 10px; border-radius: 10px; }
    h2 { margin-top: 0; }
  </style>
</head>
<body>

  <h1>Weather Forecast (Pune, IN)</h1>

  <div class="section">
    <h2>Current Weather</h2>
    <p id="current"></p>
  </div>

  <div class="section">
    <h2>Hourly Temperature (Next 12 Hours)</h2>
    <canvas id="hourlyChart" width="600" height="250"></canvas>
  </div>

  <div class="section">
    <h2>Daily Forecast (Next 7 Days)</h2>
    <canvas id="dailyChart" width="600" height="250"></canvas>
  </div>

  <script>
    const apiKey = 'fde2fa13207350d532c8e55131f22bd3';
    const lat = 18.520760;
    const lon = 73.855;

    fetch(`https://api.openweathermap.org/data/2.5/onecall?lat=${18.520760}&lon=${73.855}&appid=${de02ec8b955610aa60a581ab1babda7f}&units=metric`)
      .then(res => res.json())
      .then(data => {
        console.log("Weather Data:", data); // <== Add this
        // Display Current Weather
        const current = data.current;
        document.getElementById('current').innerHTML = `
          Temperature: ${current.temp}°C<br>
          Weather: ${current.weather[0].description}<br>
          Humidity: ${current.humidity}%<br>
          Wind: ${current.wind_speed} km/h
        `;

        // Prepare Hourly Chart (next 12 hours)
        const hourlyLabels = data.hourly.slice(0, 12).map((h, i) => {
          const hour = new Date(h.dt * 1000).getHours();
          return `${hour}:00`;
        });
        const hourlyTemps = data.hourly.slice(0, 12).map(h => h.temp);

        new Chart(document.getElementById('hourlyChart'), {
          type: 'line',
          data: {
            labels: hourlyLabels,
            datasets: [{
              label: 'Temp (°C)',
              data: hourlyTemps,
              borderColor: '#00d8ff',
              backgroundColor: 'rgba(0, 216, 255, 0.2)',
              tension: 0.4,
              fill: true,
            }]
          },
          options: {
            scales: { y: { beginAtZero: false } }
          }
        });

        // Prepare Daily Chart (next 7 days)
        const dailyLabels = data.daily.slice(0, 7).map(d =>
          new Date(d.dt * 1000).toLocaleDateString('en-IN', { weekday: 'short' })
        );
        const dailyTemps = data.daily.slice(0, 7).map(d => d.temp.day);

        new Chart(document.getElementById('dailyChart'), {
          type: 'bar',
          data: {
            labels: dailyLabels,
            datasets: [{
              label: 'Day Temp (°C)',
              data: dailyTemps,
              backgroundColor: '#f9c80e'
            }]
          },
          options: {
            scales: { y: { beginAtZero: false } }
          }
        });
      })
      .catch(err => console.error("API Error:", err));
  </script>

</body>
</html>
